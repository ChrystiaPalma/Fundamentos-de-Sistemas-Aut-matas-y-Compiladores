<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundamentos de Sistemas: Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script> tailwind.config = { darkMode: 'class' } </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
</script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .transition-node { transition: all 0.3s ease; }
        .active-state { fill: #3b82f6; stroke: #1e40af; stroke-width: 3px; }
        .active-text { fill: white; font-weight: bold; }
        .dark .active-state { fill: #3b82f6; stroke: #93c5fd; }
        .dark .active-text { fill: white; }
        .token-box { transition: all 0.2s; }
        .token-box:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100 min-h-screen flex flex-col transition-colors duration-300">

    <nav class="bg-white/80 dark:bg-slate-950/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <a href="index.html" class="flex items-center gap-2 group">
                    <div class="bg-blue-600 p-1.5 rounded-lg text-white group-hover:bg-blue-700 transition">
                        <i data-lucide="cpu" class="w-6 h-6"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-slate-900 dark:text-white">CS<span class="text-blue-600">Fundamentals</span></span>
                </a>
                
                <div class="flex items-center gap-6">
                    <div class="hidden md:flex space-x-1 text-sm font-medium bg-slate-100 dark:bg-slate-800 p-1 rounded-full">
                        <a href="index.html" class="px-4 py-1.5 rounded-full bg-white dark:bg-slate-700 shadow-sm text-blue-700 dark:text-blue-300 font-bold transition">Inicio</a>
                        <a href="lenguajes.html" class="px-4 py-1.5 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition">Lenguajes</a>
                        <a href="automatas.html" class="px-4 py-1.5 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition">Autómatas</a>
                        <a href="compiladores.html" class="px-4 py-1.5 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition">Compiladores</a>
                    </div>
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                        <i data-lucide="sun" class="hidden dark:block text-yellow-400 w-5 h-5"></i>
                        <i data-lucide="moon" class="block dark:hidden text-slate-600 w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="relative overflow-hidden bg-slate-900 text-white py-24 px-4 text-center">
        <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div>
        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-600 via-indigo-900 to-slate-900 opacity-90"></div>
        
        <div class="relative z-10 max-w-4xl mx-auto">
            <span class="inline-block py-1 px-3 rounded-full bg-blue-500/20 border border-blue-400/30 text-blue-300 text-xs font-bold tracking-wider uppercase mb-4">Ingeniería en Sistemas</span>
            <h1 class="text-5xl md:text-6xl font-extrabold mb-6 tracking-tight leading-tight">
                La Matemática detrás del <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">Software</span>
            </h1>
            <p class="text-xl text-slate-300 max-w-2xl mx-auto mb-10">
                Domina los fundamentos de Lenguajes Formales, Autómatas y Compiladores con teoría interactiva y simuladores en tiempo real.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="#simulador" class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-3.5 rounded-lg font-bold shadow-lg shadow-blue-900/50 hover:-translate-y-1 transition flex items-center justify-center gap-2">
                    <i data-lucide="play-circle" class="w-5 h-5"></i> Probar Simulador
                </a>
                <a href="lenguajes.html" class="bg-white/10 backdrop-blur border border-white/20 hover:bg-white/20 text-white px-8 py-3.5 rounded-lg font-bold transition flex items-center justify-center gap-2">
                    <i data-lucide="book-open" class="w-5 h-5"></i> Comenzar Curso
                </a>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 py-16 w-full space-y-20">

        <section>
            <div class="grid md:grid-cols-3 gap-8">
                <a href="lenguajes.html" class="group relative bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:border-blue-500/50 transition duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-100 transition duration-500">
                        <i data-lucide="arrow-up-right" class="w-6 h-6 text-blue-500"></i>
                    </div>
                    <div class="w-14 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition duration-300">
                        <i data-lucide="languages" class="w-7 h-7 text-blue-600 dark:text-blue-400"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-slate-900 dark:text-white">I. Lenguajes Formales</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">
                        Entiende la sintaxis estricta, alfabetos y la Jerarquía de Chomsky que estructura la comunicación hombre-máquina.
                    </p>
                </a>

                <a href="automatas.html" class="group relative bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:border-purple-500/50 transition duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-100 transition duration-500">
                        <i data-lucide="arrow-up-right" class="w-6 h-6 text-purple-500"></i>
                    </div>
                    <div class="w-14 h-14 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition duration-300">
                        <i data-lucide="bot" class="w-7 h-7 text-purple-600 dark:text-purple-400"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-slate-900 dark:text-white">II. Autómatas</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">
                        Desde máquinas de estado finito hasta la Máquina de Turing. Descubre cómo se procesan las cadenas de datos.
                    </p>
                </a>

                <a href="compiladores.html" class="group relative bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:border-emerald-500/50 transition duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-100 transition duration-500">
                        <i data-lucide="arrow-up-right" class="w-6 h-6 text-emerald-500"></i>
                    </div>
                    <div class="w-14 h-14 bg-emerald-100 dark:bg-emerald-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition duration-300">
                        <i data-lucide="code-2" class="w-7 h-7 text-emerald-600 dark:text-emerald-400"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-slate-900 dark:text-white">III. Compiladores</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">
                        La ingeniería detrás de la traducción de código: Lexer, Parser, AST y generación de código máquina.
                    </p>
                </a>
            </div>
        </section>

        <section id="simulador" class="scroll-mt-24">
            <div class="bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-lg border border-slate-200 dark:border-slate-700">
                <div class="flex flex-col lg:flex-row">
                    <div class="lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-slate-200 dark:border-slate-700">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="flex h-3 w-3 relative">
                                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                            </span>
                            <span class="text-xs font-bold uppercase tracking-wider text-slate-500">Laboratorio Activo</span>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">Detector de Paridad</h2>
                        <p class="text-slate-600 dark:text-slate-400 mb-6 text-sm">
                            Este Autómata Finito Determinista (DFA) aceptará cualquier cadena binaria que contenga un número <strong>impar</strong> de ceros.
                        </p>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Entrada (Binario)</label>
                                <div class="relative">
                                    <input type="text" id="dfa-input" placeholder="Ej: 10101" class="w-full pl-4 pr-12 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-white font-mono focus:ring-2 focus:ring-blue-500 outline-none transition">
                                    <div class="absolute right-3 top-3 text-slate-400 text-xs">BIN</div>
                                </div>
                            </div>
                            <button onclick="runDFA()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg shadow-blue-500/30 transition flex items-center justify-center gap-2">
                                <i data-lucide="play" class="w-4 h-4"></i> Simular Proceso
                            </button>
                            <div id="dfa-result" class="h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-slate-100 dark:bg-slate-900 text-slate-400 border border-dashed border-slate-300 dark:border-slate-700">
                                Esperando entrada...
                            </div>
                        </div>
                    </div>

                    <div class="lg:w-2/3 p-8 bg-slate-50 dark:bg-slate-900/50 rounded-b-3xl lg:rounded-r-3xl lg:rounded-bl-none flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0" style="background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 20px 20px; opacity: 0.3;"></div>
                        
                        <svg width="500" height="250" viewBox="0 0 400 250" class="relative z-10 drop-shadow-xl">
                            <defs><marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth"><path d="M0,0 L0,6 L9,3 z" class="fill-slate-400 dark:fill-slate-500" /></marker></defs>
                            <path d="M 120 125 L 280 125" class="stroke-slate-400 dark:stroke-slate-500" stroke-width="2" marker-end="url(#arrow)" />
                            <text x="200" y="115" text-anchor="middle" class="fill-slate-500 text-xs font-mono">0</text>
                            
                            <path d="M 280 125 Q 200 180 120 125" class="stroke-slate-400 dark:stroke-slate-500" stroke-width="2" marker-end="url(#arrow)" fill="none"/>
                            <text x="200" y="165" text-anchor="middle" class="fill-slate-500 text-xs font-mono">0</text>

                            <path d="M 80 125 C 60 80, 20 80, 80 100" class="stroke-slate-400 dark:stroke-slate-500" stroke-width="2" fill="none" marker-end="url(#arrow)" />
                            <text x="50" y="80" text-anchor="middle" class="fill-slate-500 text-xs font-mono">1</text>

                            <path d="M 320 125 C 340 80, 380 80, 320 100" class="stroke-slate-400 dark:stroke-slate-500" stroke-width="2" fill="none" marker-end="url(#arrow)" />
                            <text x="350" y="80" text-anchor="middle" class="fill-slate-500 text-xs font-mono">1</text>

                            <circle id="node-q0" cx="100" cy="125" r="30" class="fill-white dark:fill-slate-800 stroke-slate-500 dark:stroke-slate-400 transition-node active-state shadow-sm" stroke-width="2" />
                            <text id="text-q0" x="100" y="130" text-anchor="middle" font-family="monospace" class="active-text fill-slate-800 dark:fill-slate-200 font-bold">q0</text>
                            <text x="100" y="170" text-anchor="middle" class="fill-slate-400 text-[10px] uppercase tracking-widest">Par</text>
                            
                            <circle id="node-q1" cx="300" cy="125" r="30" class="fill-white dark:fill-slate-800 stroke-slate-500 dark:stroke-slate-400 transition-node shadow-sm" stroke-width="2" />
                            <circle cx="300" cy="125" r="24" fill="none" class="stroke-slate-500 dark:stroke-slate-400" stroke-width="1" />
                            <text id="text-q1" x="300" y="130" text-anchor="middle" font-family="monospace" class="fill-slate-800 dark:fill-slate-200 font-bold">q1</text>
                            <text x="300" y="170" text-anchor="middle" class="fill-slate-400 text-[10px] uppercase tracking-widest">Impar</text>
                        </svg>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-20">
            <div class="text-center mb-8">
                <span class="text-emerald-500 font-bold tracking-widest uppercase text-xs">Compiladores</span>
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mt-2">Scanner Léxico</h2>
            </div>
            
            <div class="bg-slate-900 rounded-xl shadow-2xl overflow-hidden max-w-4xl mx-auto border border-slate-700">
                <div class="bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <span class="text-xs text-slate-400 font-mono">main.c — Tokenizer Preview</span>
                </div>
                <div class="p-6 md:p-8">
                    <div class="flex flex-col md:flex-row gap-4 mb-8">
                        <div class="flex-grow relative">
                            <span class="absolute left-0 top-2 text-emerald-500 font-mono text-lg font-bold">~ $</span>
                            <input type="text" id="compiler-input" value="int result = (x * 5) + 10;" class="w-full bg-transparent border-b-2 border-slate-700 text-white font-mono text-lg pl-10 py-2 focus:outline-none focus:border-emerald-500 transition placeholder-slate-600" spellcheck="false">
                        </div>
                        <button onclick="tokenize()" class="bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg font-bold text-sm shadow-lg shadow-emerald-900/50 transition">
                            Analizar
                        </button>
                    </div>
                    
                    <div class="border-t border-slate-700 pt-6">
                        <p class="text-slate-500 text-xs uppercase font-bold tracking-wider mb-4">Salida (Stream de Tokens):</p>
                        <div id="token-output" class="flex flex-wrap gap-3 min-h-[60px]"></div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800 py-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <div class="mb-4">
                <i data-lucide="cpu" class="w-8 h-8 mx-auto text-slate-300 dark:text-slate-700"></i>
            </div>
            <p class="text-slate-500 dark:text-slate-400 text-sm">
                Proyecto de Ingeniería en Sistemas &copy; 2025. <br>
                Diseñado con <span class="text-red-500">♥</span> y Matemáticas.
            </p>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        
        // --- Dark Mode ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        
        function updateTheme() {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                htmlElement.classList.add('dark');
            } else {
                htmlElement.classList.remove('dark');
            }
        }
        updateTheme();

        themeToggleBtn.addEventListener('click', () => {
            htmlElement.classList.toggle('dark');
            localStorage.theme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
        });

        // --- LÓGICA DEL SIMULADOR DFA ---
        const dfaStateMap = { 'q0': { '0': 'q1', '1': 'q0' }, 'q1': { '0': 'q0', '1': 'q1' } };

        async function runDFA() {
            const input = document.getElementById('dfa-input').value;
            const resultEl = document.getElementById('dfa-result');
            
            if(!input) return;

            resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="loader-2" class="animate-spin w-4 h-4"></i> Procesando...</span>';
            resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800 transition-all";
            lucide.createIcons();
            resetNodes();

            let currentState = 'q0';
            const delay = ms => new Promise(res => setTimeout(res, ms));

            for (let char of input) {
                if (char !== '0' && char !== '1') {
                    resultEl.textContent = `Error: Carácter '${char}' inválido.`;
                    resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800";
                    return;
                }
                highlightNode(currentState);
                await delay(500); 
                currentState = dfaStateMap[currentState][char];
                resetNodes();
                await delay(100);
            }
            highlightNode(currentState);
            
            if (currentState === 'q1') {
                resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4"></i> CADENA ACEPTADA</span>';
                resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-300 dark:border-emerald-700 shadow-sm";
            } else {
                resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="x-circle" class="w-4 h-4"></i> CADENA RECHAZADA</span>';
                resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-300 dark:border-slate-600";
            }
            lucide.createIcons();
        }

        function resetNodes() {
            document.querySelectorAll('.transition-node').forEach(el => el.classList.remove('active-state'));
            document.querySelectorAll('text[id^="text-"]').forEach(el => el.classList.remove('active-text'));
        }

        function highlightNode(stateId) {
            document.getElementById(`node-${stateId}`).classList.add('active-state');
            document.getElementById(`text-${stateId}`).classList.add('active-text');
        }

        // --- LÓGICA DEL TOKENIZADOR ---
        function tokenize() {
            const input = document.getElementById('compiler-input').value;
            const output = document.getElementById('token-output');
            output.innerHTML = '';

            const patterns = [
                { type: 'KEYWORD', regex: /^(int|float|return|if|else|void)\b/, color: 'bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900/50 dark:text-purple-300 dark:border-purple-700' },
                { type: 'ID', regex: /^[a-zA-Z_][a-zA-Z0-9_]*/, color: 'bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/50 dark:text-blue-300 dark:border-blue-700' },
                { type: 'NUMBER', regex: /^\d+/, color: 'bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/50 dark:text-orange-300 dark:border-orange-700' },
                { type: 'OPERATOR', regex: /^(=|\+|-|\*|\/)/, color: 'bg-slate-200 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600' },
                { type: 'SYMBOL', regex: /^(;|{|}|\[|\]|\(|\))/, color: 'bg-gray-100 text-gray-600 border-gray-300 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600' }
            ];

            let remaining = input.trim();
            while (remaining.length > 0) {
                let matchFound = false;
                if (remaining[0] === ' ') { remaining = remaining.slice(1); continue; }
                for (let p of patterns) {
                    const match = remaining.match(p.regex);
                    if (match) {
                        createTokenBadge(p.type, match[0], p.color);
                        remaining = remaining.slice(match[0].length);
                        matchFound = true;
                        break;
                    }
                }
                if (!matchFound) {
                    createTokenBadge('ERR', remaining[0], 'bg-red-100 text-red-700 border-red-300 dark:bg-red-900/50 dark:text-red-300 dark:border-red-700 animate-pulse');
                    remaining = remaining.slice(1);
                }
            }
        }

        function createTokenBadge(type, value, classes) {
            const output = document.getElementById('token-output');
            const div = document.createElement('div');
            div.className = `token-box px-3 py-2 rounded-md border text-sm font-mono font-bold flex flex-col items-center justify-center min-w-[50px] shadow-sm select-none cursor-default ${classes}`;
            div.innerHTML = `<span>${value}</span><span class="text-[9px] opacity-70 font-sans mt-0.5 uppercase tracking-wider">${type}</span>`;
            output.appendChild(div);
        }

        window.onload = function() {
            highlightNode('q0');
            tokenize();
        };
    </script>
</body>
</html>