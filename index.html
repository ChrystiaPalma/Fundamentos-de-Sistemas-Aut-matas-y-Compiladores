<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundamentos de Sistemas: Autómatas y Compiladores</title>
    <meta name="description"
        content="Aprende Fundamentos de Sistemas, Autómatas y Compiladores con simuladores interactivos de DFA y tokenizadores léxicos.">
    <meta name="keywords"
        content="autómatas, compiladores, dfa, tokenizador, ingeniería de sistemas, lenguajes formales">
    <meta property="og:title" content="Fundamentos de Sistemas: Autómatas y Compiladores">
    <meta property="og:description"
        content="Simuladores interactivos y teoría sobre lenguajes formales y compiladores.">
    <meta property="og:type" content="website">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡</text></svg>">
    <meta property="og:description" content="Simuladores interactivos para autómatas finitos, tokenizadores y más.">
    <meta property="og:type" content="website">

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">

    <script src="https://cdn.tailwindcss.com"></script>
    <script> tailwind.config = { darkMode: 'class' } </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/theme.css">

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'base', securityLevel: 'loose' });
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .transition-node {
            transition: all 0.3s ease;
        }

        .active-state {
            fill: #3b82f6;
            stroke: #1e40af;
            stroke-width: 3px;
        }

        .active-text {
            fill: white;
            font-weight: bold;
        }

        .dark .active-state {
            fill: #3b82f6;
            stroke: #93c5fd;
        }

        .dark .active-text {
            fill: white;
        }

        .token-box {
            transition: all 0.2s;
        }

        .token-box:hover {
            transform: translateY(-2px);
        }

        .mermaid {
            display: flex;
            justify-content: center;
        }

        /* Scrollbar personalizada */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: rgba(100, 116, 139, 0.5);
            border-radius: 4px;
        }
    </style>
</head>

<body
    class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100 min-h-screen flex flex-col transition-colors duration-300">

    <nav
        class="bg-white/80 dark:bg-slate-950/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <a href="index.html" class="flex items-center gap-2 group">
                    <div class="bg-blue-600 p-1.5 rounded-lg text-white group-hover:bg-blue-700 transition">
                        <i data-lucide="cpu" class="w-6 h-6"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-slate-900 dark:text-white">IS<span
                            class="text-blue-600">Fundamentos de Sistemas: Autómatas y Compiladores</span></span>
                </a>

                <div class="flex items-center gap-6">
                    <div
                        class="hidden md:flex space-x-1 text-sm font-medium bg-slate-100 dark:bg-slate-800 p-1 rounded-full">
                        <a href="index.html"
                            class="px-4 py-1.5 rounded-full bg-white dark:bg-slate-700 shadow-sm text-blue-700 dark:text-blue-300 font-bold transition">Inicio</a>
                        <a href="#simulador"
                            class="px-4 py-1.5 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition">Autómatas</a>
                        <a href="#pila"
                            class="px-4 py-1.5 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition">Pila</a>
                        <a href="#compiladores"
                            class="px-4 py-1.5 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition">Compiladores</a>
                    </div>

                    <!-- Toggle Switch Redesign -->
                    <button id="theme-toggle"
                        class="relative group w-16 h-9 flex items-center bg-slate-200 dark:bg-slate-700 rounded-full p-1 transition-colors duration-500 focus:outline-none ring-2 ring-transparent focus:ring-purple-500"
                        aria-label="Cambiar tema">
                        <div
                            class="w-7 h-7 bg-white dark:bg-slate-800 rounded-full shadow-md transform duration-500 ease-spring dark:translate-x-7 flex items-center justify-center relative overflow-hidden">
                            <i data-lucide="sun"
                                class="w-4 h-4 text-orange-400 absolute transition-all duration-500 scale-100 rotate-0 dark:scale-0 dark:rotate-90"></i>
                            <i data-lucide="moon"
                                class="w-4 h-4 text-purple-400 absolute transition-all duration-500 scale-0 -rotate-90 dark:scale-100 dark:rotate-0"></i>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="relative overflow-hidden bg-slate-900 text-white py-24 px-4 text-center">
        <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div>
        <div
            class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-600 via-indigo-900 to-slate-900 opacity-90">
        </div>
        <div class="relative z-10 max-w-4xl mx-auto">
            <span
                class="inline-block py-1 px-3 rounded-full bg-blue-500/20 border border-blue-400/30 text-blue-300 text-xs font-bold tracking-wider uppercase mb-4">Ingeniería
                en Sistemas</span>
            <h1 class="text-5xl md:text-6xl font-extrabold mb-6 tracking-tight leading-tight">
                La Matemática detrás del <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">Software</span>
            </h1>
            <p class="text-xl text-slate-300 max-w-2xl mx-auto mb-10">
                Domina los fundamentos de Lenguajes Formales, Autómatas y Compiladores con teoría interactiva y
                simuladores en tiempo real.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="#simulador"
                    class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-3.5 rounded-lg font-bold shadow-lg shadow-blue-900/50 hover:-translate-y-1 transition flex items-center justify-center gap-2">
                    <i data-lucide="play-circle" class="w-5 h-5"></i> Probar Simulador
                </a>
                <a href="#compiladores"
                    class="bg-white/10 backdrop-blur border border-white/20 hover:bg-white/20 text-white px-8 py-3.5 rounded-lg font-bold transition flex items-center justify-center gap-2">
                    <i data-lucide="book-open" class="w-5 h-5"></i> Comenzar Curso
                </a>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 py-16 w-full space-y-20">

        <section>
            <div class="grid md:grid-cols-3 gap-8">
                <a href="lenguajes.html"
                    class="group relative bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:border-blue-500/50 transition duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-100 transition duration-500">
                        <i data-lucide="arrow-up-right" class="w-6 h-6 text-blue-500"></i>
                    </div>
                    <div
                        class="w-14 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition duration-300">
                        <i data-lucide="languages" class="w-7 h-7 text-blue-600 dark:text-blue-400"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-slate-900 dark:text-white">I. Lenguajes Formales</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">Entiende la sintaxis estricta,
                        alfabetos y la Jerarquía de Chomsky.</p>
                </a>
                <a href="automatas.html"
                    class="group relative bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:border-purple-500/50 transition duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-100 transition duration-500">
                        <i data-lucide="arrow-up-right" class="w-6 h-6 text-purple-500"></i>
                    </div>
                    <div
                        class="w-14 h-14 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition duration-300">
                        <i data-lucide="bot" class="w-7 h-7 text-purple-600 dark:text-purple-400"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-slate-900 dark:text-white">II. Autómatas</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">Desde máquinas de estado
                        finito hasta la Máquina de Turing.</p>
                </a>
                <a href="compiladores.html"
                    class="group relative bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:border-emerald-500/50 transition duration-300">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-100 transition duration-500">
                        <i data-lucide="arrow-up-right" class="w-6 h-6 text-emerald-500"></i>
                    </div>
                    <div
                        class="w-14 h-14 bg-emerald-100 dark:bg-emerald-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition duration-300">
                        <i data-lucide="code-2" class="w-7 h-7 text-emerald-600 dark:text-emerald-400"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-slate-900 dark:text-white">III. Compiladores</h3>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">Ingeniería detrás de la
                        traducción de código: Lexer, Parser y AST.</p>
                </a>
            </div>
        </section>

        <section id="simulador" class="scroll-mt-24">
            <div
                class="bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-lg border border-slate-200 dark:border-slate-700">
                <div class="flex flex-col lg:flex-row">
                    <div class="lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-slate-200 dark:border-slate-700">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="flex h-3 w-3 relative"><span
                                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span
                                    class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span></span>
                            <span class="text-xs font-bold uppercase tracking-wider text-slate-500">Laboratorio
                                Activo</span>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">Detector de Paridad</h2>
                        <p class="text-slate-600 dark:text-slate-400 mb-6 text-sm">Este DFA aceptará cualquier cadena
                            binaria que contenga un número <strong>impar</strong> de ceros.</p>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Entrada
                                    (Binario)</label>
                                <div class="relative"><input type="text" id="dfa-input" placeholder="Ej: 10101"
                                        aria-label="Entrada binaria para DFA"
                                        class="w-full pl-4 pr-12 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-white font-mono focus:ring-2 focus:ring-blue-500 outline-none transition">
                                    <div class="absolute right-3 top-3 text-slate-400 text-xs">BIN</div>
                                </div>
                            </div>
                            <button onclick="runDFA()"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg shadow-blue-500/30 transition flex items-center justify-center gap-2"><i
                                    data-lucide="play" class="w-4 h-4"></i> Simular Proceso</button>
                            <div id="dfa-result"
                                class="h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-slate-100 dark:bg-slate-900 text-slate-400 border border-dashed border-slate-300 dark:border-slate-700">
                                Esperando entrada...</div>
                        </div>
                    </div>
                    <div
                        class="lg:w-2/3 p-8 bg-slate-50 dark:bg-slate-900/50 rounded-b-3xl lg:rounded-r-3xl lg:rounded-bl-none flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0"
                            style="background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 20px 20px; opacity: 0.3;">
                        </div>
                        <svg width="500" height="250" viewBox="0 0 400 250" class="relative z-10 drop-shadow-xl">
                            <defs>
                                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"
                                    markerUnits="strokeWidth">
                                    <path d="M0,0 L0,6 L9,3 z" class="fill-slate-400 dark:fill-slate-500" />
                                </marker>
                            </defs>
                            <path d="M 120 125 L 280 125" class="stroke-slate-400 dark:stroke-slate-500"
                                stroke-width="2" marker-end="url(#arrow)" />
                            <text x="200" y="115" text-anchor="middle" class="fill-slate-500 text-xs font-mono">0</text>
                            <path d="M 280 125 Q 200 180 120 125" class="stroke-slate-400 dark:stroke-slate-500"
                                stroke-width="2" marker-end="url(#arrow)" fill="none" />
                            <text x="200" y="165" text-anchor="middle" class="fill-slate-500 text-xs font-mono">0</text>
                            <path d="M 80 125 C 60 80, 20 80, 80 100" class="stroke-slate-400 dark:stroke-slate-500"
                                stroke-width="2" fill="none" marker-end="url(#arrow)" />
                            <text x="50" y="80" text-anchor="middle" class="fill-slate-500 text-xs font-mono">1</text>
                            <path d="M 320 125 C 340 80, 380 80, 320 100" class="stroke-slate-400 dark:stroke-slate-500"
                                stroke-width="2" fill="none" marker-end="url(#arrow)" />
                            <text x="350" y="80" text-anchor="middle" class="fill-slate-500 text-xs font-mono">1</text>
                            <circle id="node-q0" cx="100" cy="125" r="30"
                                class="fill-white dark:fill-slate-800 stroke-slate-500 dark:stroke-slate-400 transition-node active-state shadow-sm"
                                stroke-width="2" />
                            <text id="text-q0" x="100" y="130" text-anchor="middle" font-family="monospace"
                                class="active-text fill-slate-800 dark:fill-slate-200 font-bold">q0</text>
                            <text x="100" y="170" text-anchor="middle"
                                class="fill-slate-400 text-[10px] uppercase tracking-widest">Par</text>
                            <circle id="node-q1" cx="300" cy="125" r="30"
                                class="fill-white dark:fill-slate-800 stroke-slate-500 dark:stroke-slate-400 transition-node shadow-sm"
                                stroke-width="2" />
                            <circle cx="300" cy="125" r="24" fill="none" class="stroke-slate-500 dark:stroke-slate-400"
                                stroke-width="1" />
                            <text id="text-q1" x="300" y="130" text-anchor="middle" font-family="monospace"
                                class="fill-slate-800 dark:fill-slate-200 font-bold">q1</text>
                            <text x="300" y="170" text-anchor="middle"
                                class="fill-slate-400 text-[10px] uppercase tracking-widest">Impar</text>
                        </svg>
                    </div>
                </div>
            </div>
        </section>

        <section id="pila" class="scroll-mt-24">
            <div
                class="bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-lg border border-slate-200 dark:border-slate-700">
                <div class="flex flex-col lg:flex-row">
                    <div class="lg:w-1/3 p-8 border-b lg:border-b-0 lg:border-r border-slate-200 dark:border-slate-700">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="flex h-3 w-3 relative"><span
                                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"></span><span
                                    class="relative inline-flex rounded-full h-3 w-3 bg-indigo-500"></span></span>
                            <span class="text-xs font-bold uppercase tracking-wider text-slate-500">Autómata de
                                Pila</span>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">Balanceo de Símbolos</h2>
                        <p class="text-slate-600 dark:text-slate-400 mb-6 text-sm">Este PDA verifica si los paréntesis y
                            corchetes están balanceados usando una <strong>Pila (LIFO)</strong>.</p>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Entrada
                                    (Cadena)</label>
                                <div class="relative"><input type="text" id="stack-input" placeholder="Ej: ([{}])"
                                        aria-label="Entrada de símbolos para pila"
                                        class="w-full pl-4 pr-12 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-white font-mono focus:ring-2 focus:ring-indigo-500 outline-none transition">
                                    <div
                                        class="absolute right-3 top-3 text-slate-400 text-xs text-indigo-500 font-bold">
                                        LIFO</div>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <div id="stack-op-push"
                                    class="text-center py-2 bg-slate-100 dark:bg-slate-700/50 rounded text-xs font-bold text-slate-400 transition-colors">
                                    PUSH</div>
                                <div id="stack-op-pop"
                                    class="text-center py-2 bg-slate-100 dark:bg-slate-700/50 rounded text-xs font-bold text-slate-400 transition-colors">
                                    POP</div>
                            </div>
                            <button onclick="runStackArgs()"
                                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-lg shadow-indigo-500/30 transition flex items-center justify-center gap-2"><i
                                    data-lucide="layers" class="w-4 h-4"></i> Verificar Pila</button>
                            <div id="stack-result"
                                class="h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-slate-100 dark:bg-slate-900 text-slate-400 border border-dashed border-slate-300 dark:border-slate-700">
                                Esperando...</div>
                        </div>
                    </div>
                    <div
                        class="lg:w-2/3 p-8 bg-slate-50 dark:bg-slate-900/50 rounded-b-3xl lg:rounded-r-3xl lg:rounded-bl-none flex flex-col items-center justify-center relative overflow-hidden min-h-[300px]">
                        <div class="absolute inset-0"
                            style="background-image: radial-gradient(#a5b4fc 1px, transparent 1px); background-size: 20px 20px; opacity: 0.3;">
                        </div>

                        <!-- Visual representation of Stack -->
                        <div class="relative z-10 flex flex-col items-center w-full max-w-[200px]">
                            <div class="w-full border-x-4 border-b-4 border-slate-300 dark:border-slate-600 rounded-b-xl min-h-[200px] bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm flex flex-col-reverse p-2 gap-1 items-center"
                                id="visual-stack">
                                <!-- Stack Items will appear here -->
                                <div
                                    class="text-slate-300 dark:text-slate-600 font-bold text-xs uppercase tracking-widest absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none">
                                    Pila Vacía</div>
                            </div>
                            <div class="mt-2 text-xs font-bold text-slate-400 uppercase tracking-widest">Estructura de
                                Datos</div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <section id="compiladores" class="scroll-mt-24">
            <div class="text-center mb-10">
                <span class="text-emerald-500 font-bold tracking-widest uppercase text-xs">Ingeniería de Software</span>
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mt-2">Arquitectura de un Compilador</h2>
                <p class="text-slate-500 dark:text-slate-400 mt-2">Flujo de transformación desde código fuente hasta
                    binario ejecutable.</p>
            </div>

            <div
                class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-12 overflow-x-auto">
                <div class="mermaid">
                    graph TD
                    SRC[Código Fuente] --> LEX[1. Léxico / Scanner]
                    LEX -->|Tokens| PAR[2. Sintáctico / Parser]
                    PAR -->|AST| SEM[3. Semántico]
                    SEM -->|AST Validado| IR[4. Código Intermedio]
                    IR --> OPT[5. Optimización]
                    OPT --> GEN[6. Código Objeto]
                    GEN --> EXE[Ejecutable / Binario]

                    style SRC fill:#f8fafc,stroke:#94a3b8,color:#334155
                    style LEX fill:#d1fae5,stroke:#059669,color:#064e3b
                    style PAR fill:#d1fae5,stroke:#059669,color:#064e3b
                    style SEM fill:#d1fae5,stroke:#059669,color:#064e3b
                    style IR fill:#e0e7ff,stroke:#4f46e5,color:#312e81
                    style OPT fill:#e0e7ff,stroke:#4f46e5,color:#312e81
                    style GEN fill:#e0e7ff,stroke:#4f46e5,color:#312e81
                    style EXE fill:#1e293b,stroke:#333,color:#fff
                </div>
            </div>

            <div
                class="bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden mb-20">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead
                            class="text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700">
                            <tr>
                                <th class="px-6 py-4">Fase</th>
                                <th class="px-6 py-4">Entrada</th>
                                <th class="px-6 py-4">Salida</th>
                                <th class="px-6 py-4">Descripción Técnica</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                            <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">1. Análisis Léxico</td>
                                <td class="px-6 py-4 text-slate-500 dark:text-slate-400 font-mono text-xs">Código Fuente
                                </td>
                                <td class="px-6 py-4 text-emerald-600 dark:text-emerald-400 font-mono text-xs">Tokens
                                </td>
                                <td class="px-6 py-4 text-slate-600 dark:text-slate-300">Divide la cadena de caracteres
                                    en unidades lógicas (palabras clave, identificadores).</td>
                            </tr>
                            <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">2. Análisis Sintáctico
                                </td>
                                <td class="px-6 py-4 text-slate-500 dark:text-slate-400 font-mono text-xs">Tokens</td>
                                <td class="px-6 py-4 text-emerald-600 dark:text-emerald-400 font-mono text-xs">Árbol
                                    (AST)</td>
                                <td class="px-6 py-4 text-slate-600 dark:text-slate-300">Verifica la estructura
                                    gramatical y construye la jerarquía lógica del programa.</td>
                            </tr>
                            <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">3. Análisis Semántico
                                </td>
                                <td class="px-6 py-4 text-slate-500 dark:text-slate-400 font-mono text-xs">AST</td>
                                <td class="px-6 py-4 text-emerald-600 dark:text-emerald-400 font-mono text-xs">AST
                                    Validado</td>
                                <td class="px-6 py-4 text-slate-600 dark:text-slate-300">Comprueba la coherencia de
                                    tipos, variables declaradas y reglas de ámbito.</td>
                            </tr>
                            <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">4. Cód. Intermedio</td>
                                <td class="px-6 py-4 text-slate-500 dark:text-slate-400 font-mono text-xs">AST Validado
                                </td>
                                <td class="px-6 py-4 text-blue-600 dark:text-blue-400 font-mono text-xs">Código IR</td>
                                <td class="px-6 py-4 text-slate-600 dark:text-slate-300">Genera una representación
                                    abstracta independiente de la máquina (ej. Código de 3 direcciones).</td>
                            </tr>
                            <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">5. Optimización</td>
                                <td class="px-6 py-4 text-slate-500 dark:text-slate-400 font-mono text-xs">Código IR
                                </td>
                                <td class="px-6 py-4 text-blue-600 dark:text-blue-400 font-mono text-xs">IR Optimizado
                                </td>
                                <td class="px-6 py-4 text-slate-600 dark:text-slate-300">Mejora el rendimiento
                                    eliminando código muerto y reduciendo operaciones costosas.</td>
                            </tr>
                            <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50">
                                <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">6. Cód. Objeto</td>
                                <td class="px-6 py-4 text-slate-500 dark:text-slate-400 font-mono text-xs">IR Optimizado
                                </td>
                                <td class="px-6 py-4 text-slate-900 dark:text-white font-mono text-xs font-bold">Binario
                                    / ASM</td>
                                <td class="px-6 py-4 text-slate-600 dark:text-slate-300">Traduce el código intermedio al
                                    lenguaje máquina específico del procesador.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="mb-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mt-2">Scanner Léxico</h2>
            </div>

            <div
                class="bg-white dark:bg-slate-900 rounded-xl shadow-2xl overflow-hidden max-w-6xl mx-auto border border-slate-200 dark:border-slate-700">
                <div
                    class="bg-slate-100 dark:bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-200 dark:border-slate-700">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <span class="text-xs text-slate-400 font-mono">main.c — Tokenizer Preview</span>
                </div>

                <div class="grid lg:grid-cols-3">

                    <div class="col-span-2 p-6 md:p-8 border-r border-slate-200 dark:border-slate-700">
                        <div class="flex flex-col gap-4 mb-8">
                            <label class="text-slate-500 dark:text-slate-400 text-xs font-bold uppercase">Entrada de
                                Código</label>
                            <div class="flex gap-4">
                                <div class="flex-grow relative">
                                    <span
                                        class="absolute left-0 top-2 text-emerald-600 dark:text-emerald-400 font-mono text-lg font-bold">~
                                        $</span>
                                    <input type="text" id="compiler-input" value="if (x <= 10) return;"
                                        aria-label="Entrada de código fuente"
                                        class="w-full bg-transparent border-b-2 border-slate-300 dark:border-slate-700 text-slate-900 dark:text-white font-mono text-lg pl-10 py-2 focus:outline-none focus:border-emerald-500 transition placeholder-slate-400 dark:placeholder-slate-600"
                                        spellcheck="false">
                                </div>
                                <button onclick="tokenize()"
                                    class="bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg font-bold text-sm shadow-lg shadow-emerald-900/50 transition">
                                    Analizar
                                </button>
                            </div>
                        </div>

                        <div class="border-t border-slate-200 dark:border-slate-700 pt-6">
                            <p class="text-slate-500 text-xs uppercase font-bold tracking-wider mb-4">Salida (Stream de
                                Tokens):</p>
                            <div id="token-output" class="flex flex-wrap gap-3 min-h-[60px]"></div>
                        </div>
                    </div>

                    <div class="col-span-1 bg-slate-50 dark:bg-slate-800/50 p-6">
                        <h4
                            class="text-slate-700 dark:text-white text-sm font-bold uppercase mb-4 flex items-center gap-2">
                            <i data-lucide="info" class="w-4 h-4 text-emerald-400"></i> Caracteres Válidos
                        </h4>
                        <div class="overflow-y-auto max-h-[250px] custom-scroll pr-2">
                            <table class="w-full text-xs text-left">
                                <thead class="text-slate-500 border-b border-slate-200 dark:border-slate-700">
                                    <tr>
                                        <th class="py-2">Token</th>
                                        <th class="py-2">Patrones Reconocidos</th>
                                    </tr>
                                </thead>
                                <tbody
                                    class="text-slate-600 dark:text-slate-300 divide-y divide-slate-200 dark:divide-slate-700 font-mono">
                                    <tr>
                                        <td class="py-2 text-purple-600 dark:text-purple-400 font-bold">KEYWORD</td>
                                        <td class="py-2">int, float, return, if, else, void</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 text-orange-600 dark:text-orange-400 font-bold">NUMBER</td>
                                        <td class="py-2">0-9 (Dígitos)</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 text-slate-600 dark:text-slate-400 font-bold">OPERATOR</td>
                                        <td class="py-2">=, +, -, *, /</td>
                                    </tr>
                                    <tr class="bg-emerald-50 dark:bg-emerald-900/20">
                                        <td class="py-2 text-emerald-600 dark:text-emerald-400 font-bold">COMPARISON
                                        </td>
                                        <td class="py-2">&lt;, &gt;, &lt;=, &gt;=, ==</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 text-gray-600 dark:text-gray-400 font-bold">SYMBOL</td>
                                        <td class="py-2">; { } ( ) [ ]</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 text-blue-600 dark:text-blue-400 font-bold">ID</td>
                                        <td class="py-2">Letras (a-z), Guion bajo (_)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800 py-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <div class="mb-4">
                <i data-lucide="cpu" class="w-8 h-8 mx-auto text-slate-300 dark:text-slate-700"></i>
            </div>
            <p class="text-slate-500 dark:text-slate-400 text-sm">
                Proyecto de Ingeniería en Sistemas &copy; 2025. <br>
                Diseñado con <span class="text-red-500">♥</span> y Matemáticas.
            </p>
        </div>
    </footer>


    <script src="js/theme.js"></script>

    <script>
        // --- LÓGICA DEL SIMULADOR DFA ---
        const dfaStateMap = { 'q0': { '0': 'q1', '1': 'q0' }, 'q1': { '0': 'q0', '1': 'q1' } };

        async function runDFA() {
            const input = document.getElementById('dfa-input').value;
            const resultEl = document.getElementById('dfa-result');

            if (!input) return;

            resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="loader-2" class="animate-spin w-4 h-4"></i> Procesando...</span>';
            resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800 transition-all";
            lucide.createIcons();
            resetNodes();

            let currentState = 'q0';
            const delay = ms => new Promise(res => setTimeout(res, ms));

            for (let char of input) {
                if (char !== '0' && char !== '1') {
                    resultEl.textContent = `Error: Carácter '${char}' inválido.`;
                    resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800";
                    return;
                }
                highlightNode(currentState);
                await delay(500);
                currentState = dfaStateMap[currentState][char];
                resetNodes();
                await delay(100);
            }
            highlightNode(currentState);

            if (currentState === 'q1') {
                resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4"></i> CADENA ACEPTADA</span>';
                resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-300 dark:border-emerald-700 shadow-sm";
            } else {
                resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="x-circle" class="w-4 h-4"></i> CADENA RECHAZADA</span>';
                resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-300 dark:border-slate-600";
            }
            lucide.createIcons();
        }

        function resetNodes() {
            document.querySelectorAll('.transition-node').forEach(el => el.classList.remove('active-state'));
            document.querySelectorAll('text[id^="text-"]').forEach(el => el.classList.remove('active-text'));
        }

        function highlightNode(stateId) {
            document.getElementById(`node-${stateId}`).classList.add('active-state');
            document.getElementById(`text-${stateId}`).classList.add('active-text');
        }

        // --- LÓGICA DEL AUTOMATA DE PILA (PDA) ---
        async function runStackArgs() {
            const input = document.getElementById('stack-input').value;
            const resultEl = document.getElementById('stack-result');
            const stackContainer = document.getElementById('visual-stack');
            const pushOp = document.getElementById('stack-op-push');
            const popOp = document.getElementById('stack-op-pop');

            if (!input) return;

            // Reset UI
            stackContainer.innerHTML = '<div class="text-slate-300 dark:text-slate-600 font-bold text-xs uppercase tracking-widest absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none">Pila Vacía</div>';
            resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="loader-2" class="animate-spin w-4 h-4"></i> Verificando...</span>';
            resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800 transition-all";
            lucide.createIcons();

            const stack = [];
            const pairs = { ')': '(', ']': '[', '}': '{' };
            const delay = ms => new Promise(res => setTimeout(res, ms));

            for (let char of input) {
                pushOp.className = "text-center py-2 bg-slate-100 dark:bg-slate-700/50 rounded text-xs font-bold text-slate-400 transition-colors";
                popOp.className = "text-center py-2 bg-slate-100 dark:bg-slate-700/50 rounded text-xs font-bold text-slate-400 transition-colors";

                if (['(', '[', '{'].includes(char)) {
                    // PUSH ACTION
                    stack.push(char);
                    pushOp.className = "text-center py-2 bg-green-100 dark:bg-green-900/50 rounded text-xs font-bold text-green-600 scale-105 transition-all shadow-sm";

                    // Add visual element
                    const el = document.createElement('div');
                    el.className = "w-full bg-indigo-500 text-white font-bold rounded py-1 text-center shadow-sm text-sm animate-in slide-in-from-top-4 fade-in duration-300";
                    el.textContent = char;
                    el.id = `stack-item-${stack.length}`;
                    stackContainer.appendChild(el);

                } else if ([')', ']', '}'].includes(char)) {
                    // POP ACTION
                    popOp.className = "text-center py-2 bg-red-100 dark:bg-red-900/50 rounded text-xs font-bold text-red-600 scale-105 transition-all shadow-sm";

                    if (stack.length === 0 || stack.pop() !== pairs[char]) {
                        resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="x-circle" class="w-4 h-4"></i> ERROR DE SINTAXIS</span>';
                        resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-300 dark:border-red-700 shadow-sm";
                        return;
                    }

                    // Remove visual element
                    const el = stackContainer.lastElementChild;
                    if (el && !el.classList.contains('absolute')) {
                        el.classList.remove('slide-in-from-top-4');
                        el.classList.add('zoom-out-90', 'fade-out', 'duration-200');
                        setTimeout(() => el.remove(), 200);
                    }
                }

                await delay(800);
            }

            if (stack.length === 0) {
                resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="check-circle" class="w-4 h-4"></i> BALANCEADO</span>';
                resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-300 dark:border-emerald-700 shadow-sm";
            } else {
                resultEl.innerHTML = '<span class="flex items-center gap-2"><i data-lucide="alert-circle" class="w-4 h-4"></i> PILA NO VACÍA</span>';
                resultEl.className = "h-10 flex items-center justify-center text-sm font-bold rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 border border-orange-300 dark:border-orange-700 shadow-sm";
            }
            lucide.createIcons();

            // Reset Ops indicators
            setTimeout(() => {
                pushOp.className = "text-center py-2 bg-slate-100 dark:bg-slate-700/50 rounded text-xs font-bold text-slate-400 transition-colors";
                popOp.className = "text-center py-2 bg-slate-100 dark:bg-slate-700/50 rounded text-xs font-bold text-slate-400 transition-colors";
            }, 500);
        }

        // --- LÓGICA DEL TOKENIZADOR ACTUALIZADA ---
        function tokenize() {
            const input = document.getElementById('compiler-input').value;
            const output = document.getElementById('token-output');
            output.innerHTML = '';

            const patterns = [
                { type: 'KEYWORD', regex: /^(int|float|return|if|else|void)\b/, color: 'bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900/50 dark:text-purple-300 dark:border-purple-700' },
                // NUEVO: Agregamos soporte para operadores de comparación (<,>, <=,>=, ==)
                {
                    type: 'CMP', regex: /^(<=|>=|==|<|>)/, color: 'bg-emerald-100 text-emerald-700 border-emerald-300 dark:bg-emerald-900/50 dark:text-emerald-300 dark:border-emerald-700'
                },
                {
                    type: 'ID', regex: /^[a-zA-Z_][a-zA-Z0-9_]*/, color: 'bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/50 dark:text-blue-300 dark:border-blue-700'
                },
                {
                    type: 'NUMBER', regex: /^\d+/, color: 'bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/50 dark:text-orange-300 dark:border-orange-700'
                },
                {
                    type: 'OPERATOR', regex: /^(=|\+|-|\*|\/)/, color: 'bg-slate-200 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600'
                },
                {
                    type: 'SYMBOL', regex: /^(;|{|}|\[|\]|\(|\))/, color: 'bg-gray-100 text-gray-600 border-gray-300 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600'
                }
            ];

            let remaining = input.trim();
            while (remaining.length > 0) {
                let matchFound = false;
                if (remaining[0] === ' ') { remaining = remaining.slice(1); continue; }
                for (let p of patterns) {
                    const match = remaining.match(p.regex);
                    if (match) {
                        createTokenBadge(p.type, match[0], p.color);
                        remaining = remaining.slice(match[0].length);
                        matchFound = true;
                        break;
                    }
                }
                if (!matchFound) {
                    createTokenBadge('ERR', remaining[0], 'bg-red-100 text-red-700 border-red-300 dark:bg-red-900/50 dark:text-red-300 dark:border-red-700 animate-pulse');
                    remaining = remaining.slice(1);
                }
            }
        }

        function createTokenBadge(type, value, classes) {
            const output = document.getElementById('token-output');
            const div = document.createElement('div');
            div.className = `token-box px-3 py-2 rounded-md border text-sm font-mono font-bold flex flex-col items-center justify-center min-w-[50px] shadow-sm select-none cursor-default ${classes}`;
            div.innerHTML = `<span>${value}</span><span class="text-[9px] opacity-70 font-sans mt-0.5 uppercase tracking-wider">${type}</span>`;
            output.appendChild(div);
        }

        window.onload = function () {
            highlightNode('q0');
            tokenize();

            // Event Listeners para tecla Enter
            document.getElementById('dfa-input').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') runDFA();
            });

            document.getElementById('compiler-input').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') tokenize();
            });

            document.getElementById('stack-input').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') runStackArgs();
            });
        };
    </script>
</body>

</html>